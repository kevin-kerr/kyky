<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Math Flashcards</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        h1 {
            color: white;
            font-size: 1.5rem;
            margin: 0 0 20px 0;
            text-align: center;
        }
        
        .settings {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 360px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        .settings label {
            display: block;
            margin-bottom: 12px;
            font-size: 0.9rem;
            color: #333;
        }
        
        .settings select, .settings input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 4px;
        }
        
        .operations {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 4px;
        }
        
        .operations button {
            flex: 1;
            min-width: 60px;
            padding: 10px;
            border: 2px solid #667eea;
            background: white;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .operations button.active {
            background: #667eea;
            color: white;
        }
        
        .card {
            background: white;
            border-radius: 24px;
            padding: 32px;
            width: 100%;
            max-width: 360px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .problem {
            font-size: 3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 24px;
            min-height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .answer-input {
            width: 100%;
            padding: 16px;
            font-size: 2rem;
            text-align: center;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            margin-bottom: 16px;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .answer-input:focus {
            border-color: #667eea;
        }
        
        .answer-input.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }
        
        .answer-input.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-check {
            background: #667eea;
            color: white;
        }
        
        .btn-next {
            background: #4CAF50;
            color: white;
        }
        
        .feedback {
            font-size: 1.5rem;
            margin: 16px 0;
            min-height: 2rem;
        }
        
        .stats {
            margin-top: 20px;
            color: white;
            font-size: 1.1rem;
            text-align: center;
        }
        
        .streak {
            font-size: 1.5rem;
            margin-top: 8px;
        }
        
        .emoji-burst {
            font-size: 3rem;
            animation: burst 0.5s ease-out;
        }
        
        @keyframes burst {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .shake {
            animation: shake 0.3s ease-in-out;
        }
    </style>
</head>
<body>
    <h1>ðŸ§® Math Flashcards</h1>
    
    <div class="settings">
        <label>
            Operations:
            <div class="operations">
                <button id="op-add" class="active" onclick="toggleOp('add')">+</button>
                <button id="op-sub" class="active" onclick="toggleOp('sub')">âˆ’</button>
                <button id="op-mul" onclick="toggleOp('mul')">Ã—</button>
                <button id="op-div" onclick="toggleOp('div')">Ã·</button>
            </div>
        </label>
        <label>
            Max number:
            <input type="number" id="maxNum" value="20" min="5" max="100" onchange="newProblem()">
        </label>
    </div>
    
    <div class="card">
        <div class="problem" id="problem"></div>
        <input type="number" class="answer-input" id="answer" placeholder="?" inputmode="numeric" pattern="[0-9]*">
        <div class="feedback" id="feedback"></div>
        <button class="btn btn-check" id="actionBtn" onclick="checkAnswer()">Check</button>
    </div>
    
    <div class="stats">
        <div>Score: <span id="correct">0</span> / <span id="total">0</span></div>
        <div class="streak">ðŸ”¥ Streak: <span id="streak">0</span></div>
    </div>

    <script>
        let currentAnswer = 0;
        let correct = 0;
        let total = 0;
        let streak = 0;
        let isChecked = false;
        let operations = { add: true, sub: true, mul: false, div: false };
        
        const emojis = {
            correct: ['ðŸŽ‰', 'â­', 'ðŸŒŸ', 'âœ¨', 'ðŸŽ¯', 'ðŸ’ª', 'ðŸ†', 'ðŸ‘'],
            incorrect: ['ðŸ¤”', 'ðŸ’­', 'ðŸ§']
        };
        
        function toggleOp(op) {
            operations[op] = !operations[op];
            const activeOps = Object.values(operations).filter(v => v).length;
            if (activeOps === 0) {
                operations[op] = true;
            }
            document.getElementById('op-' + op).classList.toggle('active', operations[op]);
            newProblem();
        }
        
        function getActiveOperations() {
            return Object.entries(operations).filter(([k, v]) => v).map(([k]) => k);
        }
        
        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        function newProblem() {
            const maxNum = parseInt(document.getElementById('maxNum').value) || 20;
            const ops = getActiveOperations();
            const op = ops[randomInt(0, ops.length - 1)];
            
            let a, b, symbol;
            
            switch(op) {
                case 'add':
                    a = randomInt(1, maxNum);
                    b = randomInt(1, maxNum);
                    currentAnswer = a + b;
                    symbol = '+';
                    break;
                case 'sub':
                    a = randomInt(1, maxNum);
                    b = randomInt(1, a);
                    currentAnswer = a - b;
                    symbol = 'âˆ’';
                    break;
                case 'mul':
                    a = randomInt(1, Math.min(12, maxNum));
                    b = randomInt(1, Math.min(12, maxNum));
                    currentAnswer = a * b;
                    symbol = 'Ã—';
                    break;
                case 'div':
                    b = randomInt(1, Math.min(12, maxNum));
                    currentAnswer = randomInt(1, Math.min(12, maxNum));
                    a = b * currentAnswer;
                    symbol = 'Ã·';
                    break;
            }
            
            document.getElementById('problem').textContent = `${a} ${symbol} ${b} = ?`;
            document.getElementById('answer').value = '';
            document.getElementById('answer').className = 'answer-input';
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('actionBtn').textContent = 'Check';
            document.getElementById('actionBtn').className = 'btn btn-check';
            isChecked = false;
            
            document.getElementById('answer').focus();
        }
        
        function checkAnswer() {
            if (isChecked) {
                newProblem();
                return;
            }
            
            const input = document.getElementById('answer');
            const userAnswer = parseInt(input.value);
            const feedback = document.getElementById('feedback');
            const btn = document.getElementById('actionBtn');
            
            if (isNaN(userAnswer)) {
                input.classList.add('shake');
                setTimeout(() => input.classList.remove('shake'), 300);
                return;
            }
            
            total++;
            isChecked = true;
            
            if (userAnswer === currentAnswer) {
                correct++;
                streak++;
                input.className = 'answer-input correct';
                const emoji = emojis.correct[randomInt(0, emojis.correct.length - 1)];
                feedback.innerHTML = `<span class="emoji-burst">${emoji}</span>`;
            } else {
                streak = 0;
                input.className = 'answer-input incorrect';
                const emoji = emojis.incorrect[randomInt(0, emojis.incorrect.length - 1)];
                feedback.innerHTML = `${emoji} It's ${currentAnswer}`;
            }
            
            document.getElementById('correct').textContent = correct;
            document.getElementById('total').textContent = total;
            document.getElementById('streak').textContent = streak;
            
            btn.textContent = 'Next â†’';
            btn.className = 'btn btn-next';
        }
        
        // Handle Enter key
        document.getElementById('answer').addEventListener('keyup', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // Start with a problem
        newProblem();
    </script>
</body>
</html>
